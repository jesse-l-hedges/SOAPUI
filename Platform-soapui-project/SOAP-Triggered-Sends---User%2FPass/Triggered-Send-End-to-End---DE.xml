<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="eecdb6ce-cf32-4b1c-88ea-71c00fc2f074" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="Triggered Send End-to-End - DE" searchProperties="true" timeout="0" xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id="0c91d349-cef6-4a1b-bf3b-68849fa9aaa9fileName">Triggered-Send-End-to-End---DE</con:setting>
    <con:setting id="eecdb6ce-cf32-4b1c-88ea-71c00fc2f074fileName">Triggered-Send-End-to-End---DE</con:setting>
  </con:settings>
  <con:testStep type="calltestcase" name="Auth" id="a524b069-706d-4916-bc6b-3012c04cea1d">
    <con:settings/>
    <con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:targetTestCase>01ab17fb-6ad8-4905-8453-0713fdf89d0e</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>accesstoken</con:name>
          <con:value>adHkxDj3PiulR3vjtX4kEhCS</con:value>
        </con:property>
        <con:property>
          <con:name>userid</con:name>
          <con:value>10782007</con:value>
        </con:property>
        <con:property>
          <con:name>mid</con:name>
          <con:value>10739553</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>accesstoken</con:entry>
        <con:entry>userid</con:entry>
        <con:entry>mid</con:entry>
      </con:returnProperties>
      <con:runMode>PARALLELL</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Get Today's Date" id="4bac75a2-c725-42e6-8384-cfcb3ae5abec">
    <con:settings/>
    <con:config>
      <script>import java.text.SimpleDateFormat
 
def date = new Date()
sdf = new SimpleDateFormat("MM/dd/yyyy")
return sdf.format(date)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Retrieve Send Classification" id="63fa8798-40ca-48c6-b652-7e16377a01b2">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Retrieve</con:operation>
      <con:request name="Retrieve Send Classification" id="f01891c0-6b33-4c8c-8bd9-72f53a17f621">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <RetrieveRequestMsg xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <RetrieveRequest>\r
            <ObjectType>SendClassification</ObjectType>\r
            <Properties>CustomerKey</Properties>\r
            <Properties>Name</Properties>\r
            <Properties>ObjectID</Properties>\r
            <ns1:Filter xsi:type="ns1:ComplexFilterPart" xmlns:ns1="http://exacttarget.com/wsdl/partnerAPI">\r
               <ns1:LeftOperand xsi:type="ns1:SimpleFilterPart">\r
                  <ns1:Property>Name</ns1:Property>\r
                  <ns1:SimpleOperator>equals</ns1:SimpleOperator>\r
                  <ns1:Value>Default Commercial</ns1:Value>\r
               </ns1:LeftOperand>\r
               <ns1:LogicalOperator>OR</ns1:LogicalOperator>\r
               <ns1:RightOperand xsi:type="ns1:SimpleFilterPart">\r
                  <ns1:Property>Name</ns1:Property>\r
                  <ns1:SimpleOperator>equals</ns1:SimpleOperator>\r
                  <ns1:Value>Marketing Send</ns1:Value>\r
               </ns1:RightOperand>\r
            </ns1:Filter>\r
         </RetrieveRequest>\r
      </RetrieveRequestMsg>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="3db620b0-9017-4198-a5f4-bc8b4e6145d9"/>
        <con:assertion type="SOAP Fault Assertion" id="8c25387e-39f7-4cf6-8114-cb966c088e26"/>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Create Random Email Name" id="02a4df94-4d28-4543-b9d0-74185ac9f27c">
    <con:settings/>
    <con:config>
      <script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

return "QETest_" + generator( (('A'..'Z')+('0'..'9')).join(), 12 )</script>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Create Email" id="4b187f0a-a380-4523-84d2-7e97b98d4ef6">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Create</con:operation>
      <con:request name="Create Email" id="d06c2d75-82e5-4eeb-84fc-82d26d292f4c">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <CreateRequest xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <Options/>\r
         <Objects xsi:type="Email">\r
            <PartnerKey xsi:nil="true"/>\r
            <ModifiedDate xsi:nil="true"/>\r
            <ObjectID xsi:nil="true"/>\r
            <Name>${Create Random Email Name#result}</Name>\r
            <HTMLBody><![CDATA[<html>
<body>

<p>
This paragraph
contains a lot of lines
in the source code,
but the browser 
ignores it.
</p>

<p>
This paragraph
contains      a lot of spaces
in the source     code,
but the    browser 
ignores it.
</p>

<p>
The number of lines in a paragraph depends on the size of your browser window. If you resize the browser window, the number of lines in this paragraph will change.
</p>

</body>
</html>


<table cellpadding="2" cellspacing="0" width="600" ID="Table5" Border=0><tr><td><font face="verdana" size="1" color="#444444">This email was sent to:  %%emailaddr%% <br><br><b>Email Sent By:</b> %%Member_Busname%%<br>%%Member_Addr%% %%Member_City%%, %%Member_State%%, %%Member_PostalCode%%, %%Member_Country%%<br><br></font></td></tr></table>
<br>
<a href="%%profile_center_url%%" alias="Update Profile">Update Profile</a>]]]]>><![CDATA[</HTMLBody>\r
            <Subject>TS Email - no list</Subject>\r
            <IsHTMLPaste>true</IsHTMLPaste>\r
         </Objects>\r
      </CreateRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="8dde20fb-2ffa-4397-9224-b8fbdafaca18"/>
        <con:assertion type="SOAP Fault Assertion" id="770111b5-5063-474d-b228-cd154d8a9d4b"/>
        <con:assertion type="Valid HTTP Status Codes" id="271bb611-a9a4-4c0b-8c51-977e1cec5c05" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="f80b49dd-a8f8-4360-bc3a-205146991d25" name="Match content of [StatusMessage]">
          <con:configuration>
            <path>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:CreateResponse[1]/ns1:Results[1]/ns1:StatusMessage[1]/text()</path>
            <content>Created Email.</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="Transfer EmailID" id="37a3c077-9d36-4f92-ab3c-d2b7b7ef4cec">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>EmailID</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>Create Email</con:sourceStep>
        <con:sourcePath>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:CreateResponse[1]/ns1:Results[1]/ns1:NewID[1]</con:sourcePath>
        <con:targetType>EmailID</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Retrieve DE Template" id="ea675cc8-3a5b-4ef0-a4dc-674399c42d04">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Retrieve</con:operation>
      <con:request name="Retrieve DE Template" id="1d2d1b64-3ee1-4a63-a0b0-052da75ed2d9">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <RetrieveRequestMsg xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <RetrieveRequest>\r
            <ObjectType>DataExtensionTemplate</ObjectType>\r
            <Properties>Name</Properties>\r
            <Properties>ObjectID</Properties>\r
            <Filter xsi:type="SimpleFilterPart">\r
               <Property>Name</Property>\r
               <SimpleOperator>equals</SimpleOperator>\r
               <Value>TriggeredSendDataExtension</Value>\r
            </Filter>\r
         </RetrieveRequest>\r
      </RetrieveRequestMsg>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="b7849b5e-f499-495f-971d-c3be1b837bca"/>
        <con:assertion type="SOAP Fault Assertion" id="4a74b0c1-b72b-43ee-b28d-f7df9e636d62"/>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="Transfer TemplateID" id="f8d3b44d-f0c8-4430-af11-8d15b4178040">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>TemplateID</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>Retrieve DE Template</con:sourceStep>
        <con:sourcePath>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:RetrieveResponseMsg[1]/ns1:Results[1]/ns1:ObjectID[1]</con:sourcePath>
        <con:targetType>DETemplateID</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Create Random DE Name" id="e756cf5b-d9d5-438a-8e3d-8baa403b96d3">
    <con:settings/>
    <con:config>
      <script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

return "QETest_TS" + generator( (('A'..'Z')+('0'..'9')).join(), 10 )</script>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Create DE for Triggered Send" id="356cc205-1013-469c-b6f2-465bffff76d9">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Create</con:operation>
      <con:request name="Create DE for Triggered Send" id="55593f14-e5b4-4211-8b9e-6130c425628e">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <CreateRequest xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <Options/>\r
         <Objects xsi:type="DataExtension">\r
            <Name>${Create Random DE Name#result}</Name>\r
            <SendableDataExtensionField>\r
               <Name>EmailAddress</Name>\r
               <FieldType>Text</FieldType>\r
            </SendableDataExtensionField>\r
            <SendableSubscriberField>\r
               <Name>EmailAddress</Name>\r
               <Value/>\r
            </SendableSubscriberField>\r
            <Template>\r
               <ObjectID>${#TestCase#DETemplateID}</ObjectID>\r
            </Template>\r
            <Fields>\r
               <Field>\r
                  <Name>Subscriber Key</Name>\r
                  <FieldType>Text</FieldType>\r
                  <MaxLength>25</MaxLength>\r
                  <IsPrimaryKey>true</IsPrimaryKey>\r
                  <IsRequired>true</IsRequired>\r
               </Field>\r
               <Field>\r
                  <Name>First Name</Name>\r
                  <FieldType>Text</FieldType>\r
                  <MaxLength>50</MaxLength>\r
                  <IsRequired>false</IsRequired>\r
               </Field>\r
               <Field>\r
                  <Name>Last Name</Name>\r
                  <FieldType>Text</FieldType>\r
                  <MaxLength>50</MaxLength>\r
                  <IsRequired>false</IsRequired>\r
               </Field>\r
               <Field>\r
                  <Name>Birthdate</Name>\r
                  <FieldType>Date</FieldType>\r
                  <IsRequired>false</IsRequired>\r
               </Field>\r
               <Field>\r
                  <Name>Age</Name>\r
                  <FieldType>Number</FieldType>\r
                  <IsRequired>false</IsRequired>\r
               </Field>\r
               <Field>\r
                  <Name>HTML Email</Name>\r
                  <FieldType>Boolean</FieldType>\r
                  <IsRequired>false</IsRequired>\r
               </Field>\r
            </Fields>\r
         </Objects>\r
      </CreateRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="705d4a0e-16bb-4818-9684-f2adececb485"/>
        <con:assertion type="SOAP Fault Assertion" id="28050c10-3db1-49aa-aa69-0a0566a20b2e"/>
        <con:assertion type="Valid HTTP Status Codes" id="4df90834-068e-444a-9876-5772dc8b8066" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="826d2402-98a0-4120-acce-01b084278aea" name="DE Created">
          <con:configuration>
            <path>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:CreateResponse[1]/ns1:Results[1]/ns1:StatusMessage[1]</path>
            <content>Data Extension created.</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="Transfer CustomObjectId" id="86e0798a-178c-46bb-b691-f34db12bcb5d">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>CustomObjectID</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>Create DE for Triggered Send</con:sourceStep>
        <con:sourcePath>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:CreateResponse[1]/ns1:Results[1]/ns1:NewObjectID[1]</con:sourcePath>
        <con:targetType>CustomObjectID</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Create Random Triggered Send Name" id="242f45ef-9248-4c66-bab2-ac5c4612a882">
    <con:settings/>
    <con:config>
      <script>def generator = { String alphabet, int n ->
  new Random().with {
    (1..n).collect { alphabet[ nextInt( alphabet.length() ) ] }.join()
  }
}

return "QETest_TS" + generator( (('A'..'Z')+('0'..'9')).join(), 10 )</script>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Create Triggered Send Def" id="78b7f850-5238-4f52-b600-f1001695c27b">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Create</con:operation>
      <con:request name="Create Triggered Send Def" id="cb917a1b-1913-4539-a6da-bcd4237f0c22">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <CreateRequest xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <Options/>\r
         <Objects xsi:type="TriggeredSendDefinition">\r
            <PartnerKey/>\r
            <ModifiedDate xsi:nil="true"/>\r
            <ObjectID xsi:nil="true"/>\r
            <Name>${Create Random Triggered Send Name#result}</Name>\r
            <SendClassification>\r
               <PartnerKey xsi:nil="true"/>\r
               <ModifiedDate xsi:nil="true"/>\r
               <CustomerKey>Default Commercial</CustomerKey>\r
            </SendClassification>\r
            <SuppressTracking>false</SuppressTracking>\r
            <TriggeredSendType>Continuous</TriggeredSendType>\r
            <Email>\r
               <PartnerKey xsi:nil="true"/>\r
               <ModifiedDate xsi:nil="true"/>\r
               <ID>${#TestCase#EmailID}</ID>\r
               <ObjectID xsi:nil="true"/>\r
            </Email>\r
            <BatchInterval>0</BatchInterval>\r
            <SendSourceDataExtension>\r
               <PartnerKey xsi:nil="true"/>\r
               <ModifiedDate xsi:nil="true"/>\r
               <ObjectID/>\r
            </SendSourceDataExtension>\r
         </Objects>\r
      </CreateRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="8ea0e630-0a37-4e51-a727-b4138497677e"/>
        <con:assertion type="SOAP Fault Assertion" id="b4a3761b-b653-4a35-a70d-06af84619b09"/>
        <con:assertion type="Valid HTTP Status Codes" id="5fcd9df8-e5ae-4ef8-8749-e2161cd077c2" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="7221beb4-e3c4-4b2c-a4fd-f453b4240e30" name="XPath Match">
          <con:configuration>
            <path>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:CreateResponse[1]/ns1:Results[1]/ns1:StatusMessage[1]</path>
            <content>TriggeredSendDefinition created</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="transfer" name="Transfer TS Def ID" id="947a3687-3c94-4d62-b17b-a0642b17d5c3">
    <con:settings/>
    <con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false">
        <con:name>TriggeredSendDefID</con:name>
        <con:sourceType>Response</con:sourceType>
        <con:sourceStep>Create Triggered Send Def</con:sourceStep>
        <con:sourcePath>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:CreateResponse[1]/ns1:Results[1]/ns1:NewObjectID[1]</con:sourcePath>
        <con:targetType>TriggeredSendID</con:targetType>
        <con:targetStep>#TestCase#</con:targetStep>
        <con:targetPath/>
        <con:upgraded>true</con:upgraded>
      </con:transfers>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Start Triggered Send" id="e1a47186-4f03-4e69-84fc-501a9b4a2f52">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Update</con:operation>
      <con:request name="Start Triggered Send" id="25e3ba1f-bb0e-4f47-acf6-4e818592b968">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <UpdateRequest xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <Options/>\r
         <Objects xsi:type="TriggeredSendDefinition">\r
            <PartnerKey xsi:nil="true"/>\r
            <ModifiedDate xsi:nil="true"/>\r
            <ObjectID>${#TestCase#TriggeredSendID}</ObjectID>\r
            <TriggeredSendStatus>Active</TriggeredSendStatus>\r
         </Objects>\r
      </UpdateRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="02e130ee-3efd-4cb3-a986-6dfade5cd4fc"/>
        <con:assertion type="SOAP Fault Assertion" id="43853276-b22f-492f-bde8-c0ee6c03561f"/>
        <con:assertion type="Valid HTTP Status Codes" id="b2d0df0e-f2ae-4f91-896e-a185bd8b112e" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="42e7aa9f-2f61-4ec4-9d45-53c01f7f50d2" name="TriggeredSendDefinition updated">
          <con:configuration>
            <path>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:UpdateResponse[1]/ns1:Results[1]/ns1:StatusMessage[1]</path>
            <content>TriggeredSendDefinition updated</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Async Send" id="e45e26f4-2f70-4514-b9ec-037481ba4add">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Create</con:operation>
      <con:request name="Async Send" id="40096cd5-6715-40a0-986f-7409dc96885c">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <CreateRequest xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <Options>\r
            <SendResponseTo>\r
               <ResponseType>email</ResponseType>\r
               <ResponseAddress>jhedges@bh.salesforce.com</ResponseAddress>\r
               <RespondWhen>Always</RespondWhen>\r
               <IncludeResults>true</IncludeResults>\r
            </SendResponseTo>\r
            <RequestType>Asynchronous</RequestType>\r
         </Options>\r
         <Objects xsi:type="TriggeredSend">\r
            <PartnerKey xsi:nil="true"/>\r
            <ModifiedDate xsi:nil="true"/>\r
            <TriggeredSendDefinition>\r
               <PartnerKey xsi:nil="true"/>\r
               <ModifiedDate xsi:nil="true"/>\r
               <ObjectID/>\r
            </TriggeredSendDefinition>\r
            <Subscribers>\r
               <PartnerKey xsi:nil="true"/>\r
               <ModifiedDate xsi:nil="true"/>\r
               <ObjectID xsi:nil="true"/>\r
               <EmailAddress>mc-apigw@bh.salesforce.com</EmailAddress>\r
               <SubscriberKey>mc-apigw2</SubscriberKey>\r
            </Subscribers>\r
         </Objects>\r
      </CreateRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="939b72b0-a58a-4d39-a66c-7fe89e1cf988"/>
        <con:assertion type="SOAP Fault Assertion" id="300d3a47-2df3-4390-8b11-29d9bff0eea1"/>
        <con:assertion type="Valid HTTP Status Codes" id="ffe7b2ff-dd4a-41bc-ade6-1d7a5f6b6d82" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="XPath Match" id="8676d008-73ec-48e4-9891-fcade8433571" name="StatusMessage">
          <con:configuration>
            <path>declare namespace ns1='http://exacttarget.com/wsdl/partnerAPI';
//ns1:CreateResponse[1]/ns1:Results[1]/ns1:StatusMessage[1]</path>
            <content>Queued</content>
            <allowWildcards>false</allowWildcards>
            <ignoreNamspaceDifferences>false</ignoreNamspaceDifferences>
            <ignoreComments>false</ignoreComments>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:testStep type="request" name="Sync Send" id="bcdd83b0-cc82-4fac-b723-79cba36adc54">
    <con:settings/>
    <con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <con:interface>ETFramework</con:interface>
      <con:operation>Create</con:operation>
      <con:request name="Sync Send" id="14c488c1-482a-404a-87db-7a2223552022">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header>
      <wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
         <wsse:UsernameToken wsu:Id="UsernameToken-340466">
            <wsse:Username>${#Project#user}</wsse:Username>
            <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">${#Project#pass}</wsse:Password>
         </wsse:UsernameToken>
      </wsse:Security>
   </soapenv:Header>
   <soapenv:Body>\r
      <CreateRequest xmlns="http://exacttarget.com/wsdl/partnerAPI">\r
         <Options>\r
            <SendResponseTo>\r
               <ResponseType>email</ResponseType>\r
               <ResponseAddress>mc-apigw@bh.salesforce.com</ResponseAddress>\r
               <RespondWhen>Always</RespondWhen>\r
               <IncludeResults>true</IncludeResults>\r
            </SendResponseTo>\r
            <RequestType>Synchronous</RequestType>\r
         </Options>\r
         <Objects xsi:type="TriggeredSend">\r
            <PartnerKey xsi:nil="true"/>\r
            <ModifiedDate xsi:nil="true"/>\r
            <TriggeredSendDefinition>\r
               <PartnerKey xsi:nil="true"/>\r
               <ModifiedDate xsi:nil="true"/>\r
               <ObjectID/>\r
            </TriggeredSendDefinition>\r
            <Subscribers>\r
               <PartnerKey xsi:nil="true"/>\r
               <ModifiedDate xsi:nil="true"/>\r
               <ObjectID xsi:nil="true"/>\r
               <EmailAddress>mc-apigw@bh.salesforce.com</EmailAddress>\r
               <SubscriberKey>mc-apigw4</SubscriberKey>\r
            </Subscribers>\r
         </Objects>\r
      </CreateRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request>
        <con:assertion type="SOAP Response" id="18489183-9677-450f-8128-7ce677fa3811"/>
        <con:assertion type="SOAP Fault Assertion" id="cb6e4ef0-a03b-4a18-9db8-8b93a889f768"/>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:wsaConfig mustUnderstand="NONE" version="200508"/>
        <con:wsrmConfig version="1.2"/>
        <con:environmentSpec>
          <con:entry environmentId="8c0ecb7e-0f97-4c23-8ef5-5ae7ad8d15f8">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:request>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>EmailID</con:name>
      <con:value>79264</con:value>
    </con:property>
    <con:property>
      <con:name>TriggeredSendID</con:name>
      <con:value>6a39821c-74b6-e611-80cf-1402ec6b9529</con:value>
    </con:property>
    <con:property>
      <con:name>CustomObjectID</con:name>
      <con:value>6939821c-74b6-e611-80cf-1402ec6b9529</con:value>
    </con:property>
    <con:property>
      <con:name>DETemplateID</con:name>
      <con:value>d9ab7bf1-6cc4-e511-851a-0022642d93a6</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
</con:testCase>
