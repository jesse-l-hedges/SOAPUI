<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="ab552c33-9313-49c5-a7da-c7e01014216c" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="Delete Categories" searchProperties="true" disabled="true" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="ab552c33-9313-49c5-a7da-c7e01014216cfileName">Delete-Categories</con:setting></con:settings><con:testStep type="calltestcase" name="Auth" id="27c477d0-2eb2-477c-9a68-1ddc9a05a495"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>01ab17fb-6ad8-4905-8453-0713fdf89d0e</con:targetTestCase><con:properties><con:property><con:name>accesstoken</con:name><con:value>6gChD1r62PtenhwfvtE6S6Ka</con:value></con:property><con:property><con:name>userid</con:name><con:value>6324883</con:value></con:property><con:property><con:name>mid</con:name><con:value>6011957</con:value></con:property></con:properties><con:returnProperties><con:entry>accesstoken</con:entry><con:entry>userid</con:entry><con:entry>mid</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="getListCategories" id="df0f7dc6-7c26-4419-bb55-689a60ac1776"><con:settings/><con:config service="APIs" resourcePath="/platform-internal/v1/categories" methodName="getCategoryCollection" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getListCategories" id="e453960c-ad11-42e9-942c-865be37dff7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${accessToken}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:request/><con:originalUri>https://www.exacttargetapis.com/platform-internal/v1/categories</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="Authorization" value="Bearer cTzhwrE0f3r70CdgzhNwYrT5"/>
  <con:entry key="includeFullPath" value=""/>
  <con:entry key="$pagesize" value=""/>
  <con:entry key="$filter" value="categoryType eq list"/>
  <con:entry key="$page" value=""/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>$page</con:entry><con:entry>$pagesize</con:entry><con:entry>$orderby</con:entry><con:entry>$search</con:entry><con:entry>includeFullPath</con:entry><con:entry>$filter</con:entry><con:entry>Host</con:entry><con:entry>categoryType</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer categoryId" id="2f475c36-c79d-4174-b4fc-662671ec70ed"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>categoryId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>getListCategories</con:sourceStep><con:sourcePath>declare namespace ns1='https://www.exacttargetapis.com/platform-internal/v1/categories';
//ns1:Response[1]/ns1:items[1]/ns1:e[2]/ns1:id[1]</con:sourcePath><con:targetType>categoryId</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>categoryCount</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>getListCategories</con:sourceStep><con:sourcePath>declare namespace ns1='https://www.exacttargetapis.com/platform-internal/v1/categories';
//ns1:Response[1]/ns1:count[1]</con:sourcePath><con:targetType>categoryCount</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Delete Categories" id="27a277ad-c3ec-461a-9698-df7cc9a9a212"><con:settings/><con:config><script>//def catCount = (${#TestCase#categoryCount} - 2)
def catCount = context.expand( '${#TestCase#categoryCount}' ) as int
log.info catCount
for (count in 1..(catCount - 2)) {
	testRunner.runTestStepByName("getListCategories")
	testRunner.runTestStepByName("Transfer categoryId")
	testRunner.runTestStepByName("Delete Category")
}
</script></con:config></con:testStep><con:testStep type="restrequest" name="Delete Category" id="bd584549-1b5f-439e-9939-f2bcd371e4f0" disabled="true"><con:settings/><con:config service="APIs" resourcePath="/platform-internal/v1/categories/{id}" methodName="deleteCategory" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Delete Category" id="59258ae1-c6a5-43dd-8c1f-9843a1d5bf4a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${accessToken}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:request/><con:originalUri>https://www.exacttargetapis.com/platform-internal/v1/categories/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="Authorization" value="Bearer cTzhwrE0f3r70CdgzhNwYrT5"/>
  <con:entry key="$pagesize" value=""/>
  <con:entry key="$categoryType" value=""/>
  <con:entry key="id" value="${#TestCase#categoryId}"/>
  <con:entry key="$page" value=""/>
</con:parameters><con:parameterOrder><con:entry>Authorization</con:entry><con:entry>Host</con:entry><con:entry>id</con:entry><con:entry>$page</con:entry><con:entry>$pagesize</con:entry><con:entry>$orderby</con:entry><con:entry>$filter</con:entry><con:entry>$categoryType</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>categoryId</con:name><con:value>215204</con:value></con:property><con:property><con:name>categoryCount</con:name><con:value>3</con:value></con:property></con:properties><con:reportParameters/></con:testCase>